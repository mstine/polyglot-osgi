<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.5.0_19) on Fri Aug 14 14:54:28 GMT-00:05 2009 -->
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
<TITLE>
BundleArchive (Apache Felix Framework 1.8.1 API)
</TITLE>

<META NAME="keywords" CONTENT="org.apache.felix.framework.cache.BundleArchive class">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    parent.document.title="BundleArchive (Apache Felix Framework 1.8.1 API)";
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/BundleArchive.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;PREV CLASS&nbsp;
&nbsp;<A HREF="../../../../../org/apache/felix/framework/cache/BundleCache.html" title="class in org.apache.felix.framework.cache"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../../index.html?org/apache/felix/framework/cache/BundleArchive.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="BundleArchive.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
org.apache.felix.framework.cache</FONT>
<BR>
Class BundleArchive</H2>
<PRE>
java.lang.Object
  <IMG SRC="../../../../../resources/inherit.gif" ALT="extended by "><B>org.apache.felix.framework.cache.BundleArchive</B>
</PRE>
<HR>
<DL>
<DT><PRE>public class <B>BundleArchive</B><DT>extends java.lang.Object</DL>
</PRE>

<P>
<p>
 This class is a logical abstraction for a bundle archive. This class,
 combined with <tt>BundleCache</tt> and concrete <tt>BundleRevision</tt>
 subclasses, implement the bundle cache for Felix. The bundle archive
 abstracts the actual bundle content into revisions and the revisions
 provide access to the actual bundle content. When a bundle is
 installed it has one revision associated with its content. Updating a
 bundle adds another revision for the updated content. Any number of
 revisions can be associated with a bundle archive. When the bundle
 (or framework) is refreshed, then all old revisions are purged and only
 the most recent revision is maintained.
 </p>
 <p>
 The content associated with a revision can come in many forms, such as
 a standard JAR file or an exploded bundle directory. The bundle archive
 is responsible for creating all revision instances during invocations
 of the <tt>revise()</tt> method call. Internally, it determines the
 concrete type of revision type by examining the location string as an
 URL. Currently, it supports standard JAR files, referenced JAR files,
 and referenced directories. Examples of each type of URL are, respectively:
 </p>
 <ul>
   <li><tt>http://www.foo.com/bundle.jar</tt></li>
   <li><tt>reference:file:/foo/bundle.jar</tt></li>
   <li><tt>reference:file:/foo/bundle/</tt></li>
 </ul>
 <p>
 The "<tt>reference:</tt>" notation signifies that the resource should be
 used "in place", meaning that they will not be copied. For referenced JAR
 files, some resources may still be copied, such as embedded JAR files or
 native libraries, but for referenced exploded bundle directories, nothing
 will be copied. Currently, reference URLs can only refer to "file:" targets.
 </p>
<P>

<P>
<DL>
<DT><B>See Also:</B><DD><A HREF="../../../../../org/apache/felix/framework/cache/BundleCache.html" title="class in org.apache.felix.framework.cache"><CODE>BundleCache</CODE></A>, 
<A HREF="../../../../../org/apache/felix/framework/cache/BundleRevision.html" title="class in org.apache.felix.framework.cache"><CODE>BundleRevision</CODE></A></DL>
<HR>

<P>
<!-- =========== FIELD SUMMARY =========== -->

<A NAME="field_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Field Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/apache/felix/framework/cache/BundleArchive.html#FILE_PROTOCOL">FILE_PROTOCOL</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/apache/felix/framework/cache/BundleArchive.html#INPUTSTREAM_PROTOCOL">INPUTSTREAM_PROTOCOL</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/apache/felix/framework/cache/BundleArchive.html#REFERENCE_PROTOCOL">REFERENCE_PROTOCOL</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
</TABLE>
&nbsp;
<!-- ======== CONSTRUCTOR SUMMARY ======== -->

<A NAME="constructor_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Constructor Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><B><A HREF="../../../../../org/apache/felix/framework/cache/BundleArchive.html#BundleArchive()">BundleArchive</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
 This constructor is only used by the system bundle archive implementation
 because it is special an is not really an archive.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><B><A HREF="../../../../../org/apache/felix/framework/cache/BundleArchive.html#BundleArchive(org.apache.felix.framework.Logger, java.io.File)">BundleArchive</A></B>(<A HREF="../../../../../org/apache/felix/framework/Logger.html" title="class in org.apache.felix.framework">Logger</A>&nbsp;logger,
              java.io.File&nbsp;archiveRootDir)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
 This constructor is called when an archive for a bundle is being
 reconstructed when the framework is restarted.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><B><A HREF="../../../../../org/apache/felix/framework/cache/BundleArchive.html#BundleArchive(org.apache.felix.framework.Logger, java.io.File, long, java.lang.String, java.io.InputStream)">BundleArchive</A></B>(<A HREF="../../../../../org/apache/felix/framework/Logger.html" title="class in org.apache.felix.framework">Logger</A>&nbsp;logger,
              java.io.File&nbsp;archiveRootDir,
              long&nbsp;id,
              java.lang.String&nbsp;location,
              java.io.InputStream&nbsp;is)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
 This constructor is used for creating new archives when a bundle is
 installed into the framework.</TD>
</TR>
</TABLE>
&nbsp;
<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Method Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.io.File</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/apache/felix/framework/cache/BundleArchive.html#getDataFile(java.lang.String)">getDataFile</A></B>(java.lang.String&nbsp;fileName)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
 Returns a <tt>File</tt> object corresponding to the data file
 of the relative path of the specified string.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;long</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/apache/felix/framework/cache/BundleArchive.html#getId()">getId</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
 Returns the bundle identifier associated with this archive.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;long</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/apache/felix/framework/cache/BundleArchive.html#getLastModified()">getLastModified</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
 Returns the last modification time of this archive.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/apache/felix/framework/cache/BundleArchive.html#getLocation()">getLocation</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
 Returns the location string associated with this archive.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/apache/felix/framework/cache/BundleArchive.html#getPersistentState()">getPersistentState</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
 Returns the persistent state of this archive.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../../../org/apache/felix/framework/cache/BundleRevision.html" title="class in org.apache.felix.framework.cache">BundleRevision</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/apache/felix/framework/cache/BundleArchive.html#getRevision(int)">getRevision</A></B>(int&nbsp;i)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
 Returns the revision object for the specified revision.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/apache/felix/framework/cache/BundleArchive.html#getRevisionCount()">getRevisionCount</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
 Returns the number of revisions available for this archive.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/apache/felix/framework/cache/BundleArchive.html#getStartLevel()">getStartLevel</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
 Returns the start level of this archive.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/apache/felix/framework/cache/BundleArchive.html#purge()">purge</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
 This method removes all old revisions associated with the archive
 and keeps only the current revision.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/apache/felix/framework/cache/BundleArchive.html#revise(java.lang.String, java.io.InputStream)">revise</A></B>(java.lang.String&nbsp;location,
       java.io.InputStream&nbsp;is)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
 This method adds a revision to the archive.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/apache/felix/framework/cache/BundleArchive.html#rollbackRevise()">rollbackRevise</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
 This method undoes the previous revision to the archive; this method will
 remove the latest revision from the archive.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/apache/felix/framework/cache/BundleArchive.html#setLastModified(long)">setLastModified</A></B>(long&nbsp;lastModified)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
 Sets the the last modification time of this archive.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/apache/felix/framework/cache/BundleArchive.html#setPersistentState(int)">setPersistentState</A></B>(int&nbsp;state)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
 Sets the persistent state of this archive.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/apache/felix/framework/cache/BundleArchive.html#setStartLevel(int)">setStartLevel</A></B>(int&nbsp;level)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
 Sets the the start level of this archive this archive.</TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_java.lang.Object"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from class java.lang.Object</B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</CODE></TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ============ FIELD DETAIL =========== -->

<A NAME="field_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Field Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="FILE_PROTOCOL"><!-- --></A><H3>
FILE_PROTOCOL</H3>
<PRE>
public static final transient java.lang.String <B>FILE_PROTOCOL</B></PRE>
<DL>
<DL>
<DT><B>See Also:</B><DD><A HREF="../../../../../constant-values.html#org.apache.felix.framework.cache.BundleArchive.FILE_PROTOCOL">Constant Field Values</A></DL>
</DL>
<HR>

<A NAME="REFERENCE_PROTOCOL"><!-- --></A><H3>
REFERENCE_PROTOCOL</H3>
<PRE>
public static final transient java.lang.String <B>REFERENCE_PROTOCOL</B></PRE>
<DL>
<DL>
<DT><B>See Also:</B><DD><A HREF="../../../../../constant-values.html#org.apache.felix.framework.cache.BundleArchive.REFERENCE_PROTOCOL">Constant Field Values</A></DL>
</DL>
<HR>

<A NAME="INPUTSTREAM_PROTOCOL"><!-- --></A><H3>
INPUTSTREAM_PROTOCOL</H3>
<PRE>
public static final transient java.lang.String <B>INPUTSTREAM_PROTOCOL</B></PRE>
<DL>
<DL>
<DT><B>See Also:</B><DD><A HREF="../../../../../constant-values.html#org.apache.felix.framework.cache.BundleArchive.INPUTSTREAM_PROTOCOL">Constant Field Values</A></DL>
</DL>

<!-- ========= CONSTRUCTOR DETAIL ======== -->

<A NAME="constructor_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Constructor Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="BundleArchive()"><!-- --></A><H3>
BundleArchive</H3>
<PRE>
public <B>BundleArchive</B>()</PRE>
<DL>
<DD><p>
 This constructor is only used by the system bundle archive implementation
 because it is special an is not really an archive.
 </p>
<P>
</DL>
<HR>

<A NAME="BundleArchive(org.apache.felix.framework.Logger, java.io.File, long, java.lang.String, java.io.InputStream)"><!-- --></A><H3>
BundleArchive</H3>
<PRE>
public <B>BundleArchive</B>(<A HREF="../../../../../org/apache/felix/framework/Logger.html" title="class in org.apache.felix.framework">Logger</A>&nbsp;logger,
                     java.io.File&nbsp;archiveRootDir,
                     long&nbsp;id,
                     java.lang.String&nbsp;location,
                     java.io.InputStream&nbsp;is)
              throws java.lang.Exception</PRE>
<DL>
<DD><p>
 This constructor is used for creating new archives when a bundle is
 installed into the framework. Each archive receives a logger, a root
 directory, its associated bundle identifier, the associated bundle
 location string, and an input stream from which to read the bundle
 content. The root directory is where any required state can be
 stored. The input stream may be null, in which case the location is
 used as an URL to the bundle content.
 </p>
<P>
<DL>
<DT><B>Parameters:</B><DD><CODE>logger</CODE> - the logger to be used by the archive.<DD><CODE>archiveRootDir</CODE> - the archive root directory for storing state.<DD><CODE>id</CODE> - the bundle identifier associated with the archive.<DD><CODE>location</CODE> - the bundle location string associated with the archive.<DD><CODE>is</CODE> - input stream from which to read the bundle content.
<DT><B>Throws:</B>
<DD><CODE>java.lang.Exception</CODE> - if any error occurs.</DL>
</DL>
<HR>

<A NAME="BundleArchive(org.apache.felix.framework.Logger, java.io.File)"><!-- --></A><H3>
BundleArchive</H3>
<PRE>
public <B>BundleArchive</B>(<A HREF="../../../../../org/apache/felix/framework/Logger.html" title="class in org.apache.felix.framework">Logger</A>&nbsp;logger,
                     java.io.File&nbsp;archiveRootDir)
              throws java.lang.Exception</PRE>
<DL>
<DD><p>
 This constructor is called when an archive for a bundle is being
 reconstructed when the framework is restarted. Each archive receives
 a logger, a root directory, and its associated bundle identifier.
 The root directory is where any required state can be stored.
 </p>
<P>
<DL>
<DT><B>Parameters:</B><DD><CODE>logger</CODE> - the logger to be used by the archive.<DD><CODE>archiveRootDir</CODE> - the archive root directory for storing state.<DD><CODE>id</CODE> - the bundle identifier associated with the archive.
<DT><B>Throws:</B>
<DD><CODE>java.lang.Exception</CODE> - if any error occurs.</DL>
</DL>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Method Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="getId()"><!-- --></A><H3>
getId</H3>
<PRE>
public long <B>getId</B>()
           throws java.lang.Exception</PRE>
<DL>
<DD><p>
 Returns the bundle identifier associated with this archive.
 </p>
<P>
<DD><DL>

<DT><B>Returns:</B><DD>the bundle identifier associated with this archive.
<DT><B>Throws:</B>
<DD><CODE>java.lang.Exception</CODE> - if any error occurs.</DL>
</DD>
</DL>
<HR>

<A NAME="getLocation()"><!-- --></A><H3>
getLocation</H3>
<PRE>
public java.lang.String <B>getLocation</B>()
                             throws java.lang.Exception</PRE>
<DL>
<DD><p>
 Returns the location string associated with this archive.
 </p>
<P>
<DD><DL>

<DT><B>Returns:</B><DD>the location string associated with this archive.
<DT><B>Throws:</B>
<DD><CODE>java.lang.Exception</CODE> - if any error occurs.</DL>
</DD>
</DL>
<HR>

<A NAME="getPersistentState()"><!-- --></A><H3>
getPersistentState</H3>
<PRE>
public int <B>getPersistentState</B>()
                       throws java.lang.Exception</PRE>
<DL>
<DD><p>
 Returns the persistent state of this archive. The value returned is
 one of the following: <tt>Bundle.INSTALLED</tt>, <tt>Bundle.ACTIVE</tt>,
 or <tt>Bundle.UNINSTALLED</tt>.
 </p>
<P>
<DD><DL>

<DT><B>Returns:</B><DD>the persistent state of this archive.
<DT><B>Throws:</B>
<DD><CODE>java.lang.Exception</CODE> - if any error occurs.</DL>
</DD>
</DL>
<HR>

<A NAME="setPersistentState(int)"><!-- --></A><H3>
setPersistentState</H3>
<PRE>
public void <B>setPersistentState</B>(int&nbsp;state)
                        throws java.lang.Exception</PRE>
<DL>
<DD><p>
 Sets the persistent state of this archive. The value is
 one of the following: <tt>Bundle.INSTALLED</tt>, <tt>Bundle.ACTIVE</tt>,
 or <tt>Bundle.UNINSTALLED</tt>.
 </p>
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>state</CODE> - the persistent state value to set for this archive.
<DT><B>Throws:</B>
<DD><CODE>java.lang.Exception</CODE> - if any error occurs.</DL>
</DD>
</DL>
<HR>

<A NAME="getStartLevel()"><!-- --></A><H3>
getStartLevel</H3>
<PRE>
public int <B>getStartLevel</B>()
                  throws java.lang.Exception</PRE>
<DL>
<DD><p>
 Returns the start level of this archive.
 </p>
<P>
<DD><DL>

<DT><B>Returns:</B><DD>the start level of this archive.
<DT><B>Throws:</B>
<DD><CODE>java.lang.Exception</CODE> - if any error occurs.</DL>
</DD>
</DL>
<HR>

<A NAME="setStartLevel(int)"><!-- --></A><H3>
setStartLevel</H3>
<PRE>
public void <B>setStartLevel</B>(int&nbsp;level)
                   throws java.lang.Exception</PRE>
<DL>
<DD><p>
 Sets the the start level of this archive this archive.
 </p>
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>level</CODE> - the start level to set for this archive.
<DT><B>Throws:</B>
<DD><CODE>java.lang.Exception</CODE> - if any error occurs.</DL>
</DD>
</DL>
<HR>

<A NAME="getLastModified()"><!-- --></A><H3>
getLastModified</H3>
<PRE>
public long <B>getLastModified</B>()
                     throws java.lang.Exception</PRE>
<DL>
<DD><p>
 Returns the last modification time of this archive.
 </p>
<P>
<DD><DL>

<DT><B>Returns:</B><DD>the last modification time of this archive.
<DT><B>Throws:</B>
<DD><CODE>java.lang.Exception</CODE> - if any error occurs.</DL>
</DD>
</DL>
<HR>

<A NAME="setLastModified(long)"><!-- --></A><H3>
setLastModified</H3>
<PRE>
public void <B>setLastModified</B>(long&nbsp;lastModified)
                     throws java.lang.Exception</PRE>
<DL>
<DD><p>
 Sets the the last modification time of this archive.
 </p>
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>lastModified</CODE> - The time of the last modification to set for
      this archive. According to the OSGi specification this time is
      set each time a bundle is installed, updated or uninstalled.
<DT><B>Throws:</B>
<DD><CODE>java.lang.Exception</CODE> - if any error occurs.</DL>
</DD>
</DL>
<HR>

<A NAME="getDataFile(java.lang.String)"><!-- --></A><H3>
getDataFile</H3>
<PRE>
public java.io.File <B>getDataFile</B>(java.lang.String&nbsp;fileName)
                         throws java.lang.Exception</PRE>
<DL>
<DD><p>
 Returns a <tt>File</tt> object corresponding to the data file
 of the relative path of the specified string.
 </p>
<P>
<DD><DL>

<DT><B>Returns:</B><DD>a <tt>File</tt> object corresponding to the specified file name.
<DT><B>Throws:</B>
<DD><CODE>java.lang.Exception</CODE> - if any error occurs.</DL>
</DD>
</DL>
<HR>

<A NAME="getRevisionCount()"><!-- --></A><H3>
getRevisionCount</H3>
<PRE>
public int <B>getRevisionCount</B>()</PRE>
<DL>
<DD><p>
 Returns the number of revisions available for this archive.
 </p>
<P>
<DD><DL>

<DT><B>Returns:</B><DD>tthe number of revisions available for this archive.</DL>
</DD>
</DL>
<HR>

<A NAME="getRevision(int)"><!-- --></A><H3>
getRevision</H3>
<PRE>
public <A HREF="../../../../../org/apache/felix/framework/cache/BundleRevision.html" title="class in org.apache.felix.framework.cache">BundleRevision</A> <B>getRevision</B>(int&nbsp;i)</PRE>
<DL>
<DD><p>
 Returns the revision object for the specified revision.
 </p>
<P>
<DD><DL>

<DT><B>Returns:</B><DD>the revision object for the specified revision.</DL>
</DD>
</DL>
<HR>

<A NAME="revise(java.lang.String, java.io.InputStream)"><!-- --></A><H3>
revise</H3>
<PRE>
public void <B>revise</B>(java.lang.String&nbsp;location,
                   java.io.InputStream&nbsp;is)
            throws java.lang.Exception</PRE>
<DL>
<DD><p>
 This method adds a revision to the archive. The revision is created
 based on the specified location and/or input stream.
 </p>
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>location</CODE> - the location string associated with the revision.
<DT><B>Throws:</B>
<DD><CODE>java.lang.Exception</CODE> - if any error occurs.</DL>
</DD>
</DL>
<HR>

<A NAME="rollbackRevise()"><!-- --></A><H3>
rollbackRevise</H3>
<PRE>
public boolean <B>rollbackRevise</B>()
                       throws java.lang.Exception</PRE>
<DL>
<DD><p>
 This method undoes the previous revision to the archive; this method will
 remove the latest revision from the archive. This method is only called
 when there are problems during an update after the revision has been
 created, such as errors in the update bundle's manifest. This method
 can only be called if there is more than one revision, otherwise there
 is nothing to undo.
 </p>
<P>
<DD><DL>

<DT><B>Returns:</B><DD>true if the undo was a success false if there is no previous revision
<DT><B>Throws:</B>
<DD><CODE>java.lang.Exception</CODE> - if any error occurs.</DL>
</DD>
</DL>
<HR>

<A NAME="purge()"><!-- --></A><H3>
purge</H3>
<PRE>
public void <B>purge</B>()
           throws java.lang.Exception</PRE>
<DL>
<DD><p>
 This method removes all old revisions associated with the archive
 and keeps only the current revision.
 </p>
<P>
<DD><DL>

<DT><B>Throws:</B>
<DD><CODE>java.lang.Exception</CODE> - if any error occurs.</DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/BundleArchive.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;PREV CLASS&nbsp;
&nbsp;<A HREF="../../../../../org/apache/felix/framework/cache/BundleCache.html" title="class in org.apache.felix.framework.cache"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../../index.html?org/apache/felix/framework/cache/BundleArchive.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="BundleArchive.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>
Copyright &#169; 2006-2009 <a href="http://www.apache.org/">The Apache Software Foundation</a>. All Rights Reserved.
</BODY>
</HTML>
